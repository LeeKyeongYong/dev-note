# 5장 객체지향 설계 5원칙 - SOLID

## 서문
- 결합도와 응집도
  - 결합도: `클래스(모듈) 간의 상호 의존 정도`로서 결합도가 낮으면 모듈 간의 상호 의존성이 줄어들어 객체의 재사용이나 수정 및 유지보수가 용이
  - 응집도: `클래스(모듈) 내부에 존재하는 구성 요소들의 기능적 관령성`으로 응집도가 높은 모듈은 하나의 책임에 집중하고 독립성이 높아져 재사용이나 기능의 수정 및 유지보수가 용이
> 결합도는 낮추고 응집도는 높이는 것이 좋은 코드이다!

## SRP - 단일 책임 원칙
- 단일 책임 원칙
  - `어떤 클래스를 변경해야하는 이유는 오직 하나여야 한다!`
  - 역할(책임)을 분리하라는 것이 단일 책임 원칙
  - 하나의 클래스에 다수의 역할이 몰려 있을 때보다 클래스를 분할하거나 속성, 메서드 등을 분할해서 단일한 역할을 하게 하는 것이 좋음
  - **인터페이스 분리 원칙**과 같이 고려해야하는 상황이 많은 원칙
  - 단일 역할을 통해 클래스의 추상화를 고도화 할 수 있으며 유지보수의 용이성을 얻을 수 있음
- 단일 책임 원칙이 잘 지켜지지 않은 예 - 속성
  - `클래스를 사용할 때 몇몇 경우에서 클래스에 필요 없는 속성이 있는 경우` 단일 책임 원칙을 어겼을 가능성이 큼
  - `하나의 속성이 여러 역할(의미)를 갖는 경우`에도 단일 책임 원칙을 어겼을 가능성이 큼
- 단일 책임 원칙이 잘 지켜지지 않은 예 - 메서드
  - `메서드 안에서 상황에 따른 분기처리를 위해 if 문이 많이 쓰였을 경우` 단일 책임 원칙을 어겼을 가능성이 큼

## OCP - 개방 폐쇄 원칙
- 개방 폐쇄 원칙
  - `자신의 확장에는 열려 있고, 주변의 변화에는 닫혀있어야한다!`
  - `상위 클래스나 인터페이스`를 중간에 둠으로써 클래스가 확장 될때는 열려 있고 주변의 변화에는 영향을 받지 않도록 설계
  - 유연성과 재사용성을 얻을 수 있음
  - **의존 제어 원칙**과 맥을 같이하는 원칙

## LSP - 리스코프 치환 원칙
- 리스코프 치환 원칙
  - `서브 타입은 언제나 자신의 기반(상위) 타입으로 교체할 수 있어야 한다!`
  - 하위 클래스의 인스턴스는 상위형 객체 참조 변수에 대입해 상위 클래스의 인스턴스 역할을 하는데 없가 없어야함
- 클래스와 인터페이스 규칙
  - 하위 클래스 is a kind of 상위 클래스 - 하위 클래스는 상위 클래스의 한 종류
  - 구현 클래스 is able to 인터페이스 - 구현 클래스는 인터페이스할 수 있음
- 리스코프 치환 원칙이 잘 지켜지지 않은 예 - 계층도 형태의 상속
  - 계층도 형태는 상위 클래스(아버지)와 하위 클래스(딸)의 형태로 객체의 행동을 묘사하는 메서드가 리스코프 치환 원칙을 위배할 가능성이 큼
- 리스코프 치환 원칙이 잘 지켜진 예 - 분류도 형태의 상속
  - 분류도 형태는 상위 클래스(동물)와 하위 클래스(펭귄)의 형태로 객체의 행동을 묘사하는 메서드가 리스코프 치환 원칙을 위배하지 않을 가능성이 큼

## ISP - 인터페이스 분리 원칙
- 인터페이스 분리 원칙
  - `클라이언트는 자신이 사용하지 않는 메서드에 의존 관계를 맺으면 안된다!`
  - **단일 책임 원칙**에서 제시한 역할의 분류는 클래스 자체를 분할하는 것이었다면, 인터페이스 분리 원칙에서는 역할의 분류는 인터페이스로 묶어서 분할
  - 특별한 경우가 아니면 단일 책임 원칙을 적용한 방법이 조금 더 좋은 해결책
- 인터페이스 최소주의 원칙
  - 인터페이스를 통해 메서드를 외부에 제공할 때는 최소한의 메서드만 제공
  - 설계가 잘 되어 있다면 상위 클래스는 풍성할 수록 좋고, 인터페이스는 작을 수록 좋음
  - 풍성한 클래스를 사용하지 않으면 하위 클래스에 메서드들이 각각 존재하게 되고 다형성을 활용해 부모 타입으로 하위 인스턴스들을 활용할 때마다 형변환을 해야함

## DIP - 의존 역전 원칙
- 의존 제어 원칙
  - `추상화된 것은 구체적인 것에 의존하면 안되고, 구체적인 것은 추상화된 것에 의존해야한다!`
  - `자신보다 변하기 쉬운 것에 의존하지 마라!`
  - **개방 폐쇄 원칙**은 상위 클래스나 인터페이스를 중간에 둠으로써 확장은 편하게 하고 주변 변화에 의한 수정은 어렵게 하는 것인데, 의존 역전 원칙은 상위 클래스나 인터페이스를 통해서 `추상화된 것에 의존`하라는 원칙
  - 변하기 쉬운 것에 의존하던 것을 추상화된 인터페이스나 상위 클래스를 두어 `변하기 쉬운 것의 변화에 영향받지 않게` 의존의 방향을 역전해야함

## 정리 - 객체지향 세계와 SOLID
- 관심이 같은 것끼리는 하나의 객체 안으로 또는 친한 객체로 모으고, 관심이 다른 것은 가능한 한 따로 떨어져 서로 영향을 주지 않도록 분리
- SRP(단일 책임 원칙): 어떤 클래스를 변경해야하는 이유는 오직 하나여야 한다
- OCP(개방 폐쇄 원칙): 자신의 확장에는 열려 있고, 주변의 변화에는 닫혀있어야한다
- LSP(리스코프 치환 원칙): 서브 타입은 언제나 자신의 기반(상위) 타입으로 교체할 수 있어야 한다
- ISP(인터페이스 분리 원칙): 클라이언트는 자신이 사용하지 않는 메서드에 의존 관계를 맺으면 안된다
- DIP(의존 역전 원칙): 자신보다 변하기 쉬운 것에 의존하지 마라
